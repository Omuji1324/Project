@using System.Web
@using LibData.Configuration
@model IEnumerable<LibData.Product>
@using PagedList;
@using PagedList.Mvc;

@{

    var path = Server.MapPath("~/Images/Product");
    var type = ViewBag.Type as string;
    var brand = new Website.Controllers.HomeController().ListBrand() as List<LibData.Brand>;
}
<div class="shopping-grid">
    <div class="container">
        @if (type == ViewConfig.DISCOUNT)
        {
            <h3 class="" align="center">Giảm giá</h3>
        }
        @if (type == ViewConfig.MALE)
        {
            <h3 class="" align="center">Giày Nam</h3>
        }
        @if (type == ViewConfig.FEMALE)
        {
            <h3 class="" align="center">Giày nữ</h3>
        }
        @if (type == ViewConfig.PRODUCTNEW)
        {
            <h3 class="" align="center">New</h3>
        }
        @if (type == ViewConfig.TOPSALE)
        {
            <h3 class="" align="center">Bán chạy</h3>
        }

        <form method="get">
            <div class="row mb-4">
                <input type="hidden" name="type" id="type" class="type" value="@type" />
                <div class="col-12 col-sm-6 col-md-3">
                    <input type="text" name="keysearch" id="keysearch" class="keysearch form-control" placeholder="Nhập tên sản phẩm" value="@ViewBag.keysearch" />
                </div>
                <div class="col-12 col-sm-6 col-md-3">
                    <select class="form-control brandid" id="brandid" name="brandid">
                        <option value="-1">Tất cả các hãng</option>
                        @foreach (var item in brand)
                        {
                            <option value="@item.Id" @(item.Id == ViewBag.brandid ? "selected" : "")>@item.Name</option>
                        }
                    </select>
                </div>
                <div class="col-12 col-sm-6 col-md-3">
                    @if ((type == ViewConfig.MALE) || (type == ViewConfig.FEMALE)) { }
                    else
                    {
                        <select class="form-control typeselect" id="typeselect" name="typeselect">
                            <option value="-1">Tất cả</option>
                            <option value="1" @((ViewBag.typeselect == 1) ? "selected" : "")>Nam</option>
                            <option value="2" @((ViewBag.typeselect == 2) ? "selected" : "")>Nữ</option>
                        </select>
                    }
                </div>
                <div class="col-2 col-sm-2 col-md-2">
                    <button type="submit" class="btn btn-success">Tìm kiếm</button>
                </div>
            </div>

        </form>
        <div class="row" id="list-product">
            @foreach (var item in Model)
            {
                <div class="col-md-3 col-sm-6">
                    <div class="product-grid7">
                        <div class="product-image7">
                            <a href="#" style="width:250px; height:250px;margin:0px">
                                <img class="pic-1" src="http://bestjquery.com/tutorial/product-grid/demo8/images/img-1.jpg">

                            </a>
                            <ul class="social">
                                <li title="Chi tiết"><a href="" class="fa fa-search"></a></li>
                                <li title="Thêm vào giỏ hàng"><a href="" class="fa fa-shopping-cart"></a></li>
                            </ul>
                            @if (type == ViewConfig.PRODUCTNEW)
                            {
                                <span class="product-new-label">New</span>
                            }

                        </div>
                        <div class="product-content">
                            <h3 class="title"><a href="#">@item.Name</a></h3>
                            @*<ul class="rating">
                                    <li class="fa fa-star"></li>
                                    <li class="fa fa-star"></li>
                                    <li class="fa fa-star"></li>
                                    <li class="fa fa-star"></li>
                                    <li class="fa fa-star"></li>
                                </ul>*@
                            <div class="price">
                                @item.Price VNĐ
                                @*<span>$20.00</span>*@
                            </div>
                        </div>
                    </div>
                </div>
            }
            <div class="col-md-12">
                <div class="row float-right">
                    @*phân trang*@
                    @Html.PagedListPager((IPagedList)Model,
                    page => Url.Action("Index", new { page = page, type = ViewBag.Type, brandid = ViewBag.brandid, keysearch = ViewBag.keysearch, typeselect = ViewBag.typeselect }),
                    PagedListRenderOptions.EnableUnobtrusiveAjaxReplacing(new AjaxOptions()
                    {
                        HttpMethod = "GET",
                        UpdateTargetId = "list-product",
                    })
                    )
                </div>
            </div>
        </div>
    </div>
</div>
}
